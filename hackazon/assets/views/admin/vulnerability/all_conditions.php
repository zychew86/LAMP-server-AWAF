<?php
$formHelper = $view['form'];
$formHelper->setTheme($form, __DIR__);
/** @var \Symfony\Component\Form\FormView $form */
$allConditions = [];
?>
<?php foreach ($form['conditions']->children as $child) {
    $conditionHtml = $formHelper->row($child);
    $conditionHtml = str_replace(
        ['form___ALL_CONDITIONS__', 'form[__ALL_CONDITIONS__]'],
        ['{{ id }}', '{{ name }}'],
        $conditionHtml);
    $allConditions[] = $child['name']->vars['value'];
    ?>
<script type="text/x-handlebars" charset="UTF-8" id="tplCondition_<?php echo $child['name']->vars['value']; ?>"
        class="js-template js-condition-template" data-condition="<?php echo $child['name']->vars['value']; ?>">
    <?php echo $conditionHtml."\n"; ?>
</script>
<?php } ?>
<script type="text/javascript">
    VulnInfo = typeof VulnInfo == 'object' ? VulnInfo : {};
    VulnInfo.conditions = ['<?php echo implode("', '", $allConditions) ?>'];
</script>
<?php //echo $formHelper->rest($form); ?>
<?php foreach ($form as $child): ?>
    <?php if (!$child->isRendered()): ?>
        <?php echo $view['form']->row($child) ?>
    <?php endif; ?>
<?php endforeach; ?>

